# é¦™æ¸¯å…­åˆå½©æ™ºèƒ½è½®è¯¢ç­–ç•¥

**éƒ¨ç½²æ—¶é—´**: 2025-12-27
**çŠ¶æ€**: âœ… å·²å¯ç”¨

---

## ðŸŽ¯ ç­–ç•¥æ¦‚è¿°

æ ¹æ®å¼€å¥–æ—¶é—´å’ŒOn.cc APIå»¶è¿Ÿç‰¹æ€§ï¼Œå®žçŽ°åŸºäºŽæ—¶æ®µçš„æ™ºèƒ½è½®è¯¢ï¼š

### å¼€å¥–æ—¶é—´
- **æ¯å‘¨**: äºŒã€å››ã€å…­
- **æ—¶é—´**: æ™šä¸Š 21:30
- **APIå»¶è¿Ÿ**: é€šå¸¸3-10åˆ†é’Ÿ

---

## ðŸ“Š è½®è¯¢ç­–ç•¥è¯¦æƒ…

### 1ï¸âƒ£ å¼€å¥–æ—¥ï¼ˆå‘¨äºŒã€å››ã€å…­ï¼‰

| æ—¶é—´æ®µ | ç­–ç•¥ | é—´éš” | è¯´æ˜Ž |
|--------|------|------|------|
| **21:25-21:45** | ðŸ”¥ åŠ å¯†æ£€æµ‹æœŸ | **3ç§’** | On.cc APIæ›´æ–°çª—å£æœŸ |
| **21:45-22:00** | â° å»¶è¿Ÿç¡®è®¤æœŸ | **10ç§’** | ç¡®ä¿æ•°æ®å®Œå…¨æ›´æ–° |
| **å…¶ä»–æ—¶é—´** | ðŸ“… å¸¸è§„è½®è¯¢ | **5åˆ†é’Ÿ** | èŠ‚çœèµ„æº |

### 2ï¸âƒ£ éžå¼€å¥–æ—¥ï¼ˆå‘¨æ—¥ã€ä¸€ã€ä¸‰ã€äº”ï¼‰

| æ—¶é—´æ®µ | ç­–ç•¥ | é—´éš” |
|--------|------|------|
| **å…¨å¤©** | ðŸ’¤ ä½Žé¢‘æ£€æŸ¥ | **30åˆ†é’Ÿ** |

---

## ðŸ” ç­–ç•¥æ‰§è¡Œç¤ºä¾‹

### å‘¨å…­ï¼ˆä»Šå¤©ï¼‰
```
00:00-21:24  â†’ æ¯5åˆ†é’Ÿè½®è¯¢ âœ… å½“å‰çŠ¶æ€
21:25-21:45  â†’ æ¯3ç§’è½®è¯¢   ï¼ˆåŠ å¯†æœŸï¼Œ5å°æ—¶åŽï¼‰
21:45-22:00  â†’ æ¯10ç§’è½®è¯¢  ï¼ˆç¡®è®¤æœŸï¼‰
22:00-23:59  â†’ æ¯5åˆ†é’Ÿè½®è¯¢
```

### å‘¨æ—¥ï¼ˆæ˜Žå¤©ï¼‰
```
00:00-23:59  â†’ æ¯30åˆ†é’Ÿè½®è¯¢
```

---

## ðŸ“ˆ èµ„æºä¼˜åŒ–

### å¯¹æ¯”åŽŸç­–ç•¥ï¼ˆæ¯5ç§’è½®è¯¢ï¼‰

| åœºæ™¯ | åŽŸç­–ç•¥ | æ™ºèƒ½ç­–ç•¥ | èŠ‚çœ |
|------|--------|----------|------|
| å¼€å¥–æ—¥ 21:25-21:45 | æ¯5ç§’ | æ¯3ç§’ | -40% |
| å¼€å¥–æ—¥ 21:45-22:00 | æ¯5ç§’ | æ¯10ç§’ | +50% |
| å¼€å¥–æ—¥å…¶ä»–æ—¶é—´ | æ¯5ç§’ | æ¯5åˆ†é’Ÿ | **98.6%** â¬‡ï¸ |
| éžå¼€å¥–æ—¥å…¨å¤© | æ¯5ç§’ | æ¯30åˆ†é’Ÿ | **99.7%** â¬‡ï¸ |

### æ¯å‘¨è¯·æ±‚é‡å¯¹æ¯”

```
åŽŸç­–ç•¥: 7å¤© Ã— 86400ç§’ / 5ç§’ = 120,960 æ¬¡/å‘¨

æ™ºèƒ½ç­–ç•¥ä¼°ç®—:
- å¼€å¥–æ—¥ï¼ˆ3å¤©ï¼‰åŠ å¯†æœŸï¼š3Ã—20åˆ†é’ŸÃ—20æ¬¡/åˆ† = 1,200æ¬¡
- å¼€å¥–æ—¥ç¡®è®¤æœŸï¼š3Ã—15åˆ†é’ŸÃ—6æ¬¡/åˆ† = 270æ¬¡
- å¼€å¥–æ—¥å¸¸è§„ï¼š3Ã—23å°æ—¶Ã—12æ¬¡/æ—¶ = 828æ¬¡
- éžå¼€å¥–æ—¥ï¼š4å¤©Ã—24å°æ—¶Ã—2æ¬¡/æ—¶ = 192æ¬¡

æ™ºèƒ½ç­–ç•¥æ€»è®¡: ~2,490 æ¬¡/å‘¨
èŠ‚çœ: 118,470 æ¬¡/å‘¨ (97.9% â¬‡ï¸)
```

---

## âœ… å®žæ—¶ç›‘æŽ§

### æŸ¥çœ‹å½“å‰çŠ¶æ€
```bash
docker logs lottery-crawler-compose 2>&1 | grep "é¦™æ¸¯å…­åˆå½©" | tail -10
```

### å…³é”®æ—¥å¿—æ ‡è¯†
- ðŸ”¥ `[å¼€å¥–æ—¥-åŠ å¯†æœŸ]` - é«˜é¢‘è½®è¯¢ï¼ˆæ¯3ç§’ï¼‰
- â° `[å¼€å¥–æ—¥-ç¡®è®¤æœŸ]` - ä¸­é¢‘è½®è¯¢ï¼ˆæ¯10ç§’ï¼‰
- ðŸ“… `[å¼€å¥–æ—¥-å¸¸è§„]` - å¸¸è§„è½®è¯¢ï¼ˆæ¯5åˆ†é’Ÿï¼‰
- ðŸ’¤ `[éžå¼€å¥–æ—¥]` - ä½Žé¢‘è½®è¯¢ï¼ˆæ¯30åˆ†é’Ÿï¼‰

---

## ðŸŽ¯ æ•ˆæžœéªŒè¯

### ä»Šæ™š21:25éªŒè¯æ¸…å•

1. **21:20** - åº”è¯¥æ˜¾ç¤º `[å¼€å¥–æ—¥-å¸¸è§„]`ï¼Œæ¯5åˆ†é’Ÿ
2. **21:25** - è‡ªåŠ¨åˆ‡æ¢åˆ° `[å¼€å¥–æ—¥-åŠ å¯†æœŸ]`ï¼Œæ¯3ç§’ ðŸ”¥
3. **21:45** - è‡ªåŠ¨åˆ‡æ¢åˆ° `[å¼€å¥–æ—¥-ç¡®è®¤æœŸ]`ï¼Œæ¯10ç§’ â°
4. **22:00** - æ¢å¤åˆ° `[å¼€å¥–æ—¥-å¸¸è§„]`ï¼Œæ¯5åˆ†é’Ÿ ðŸ“…

### æ•°æ®èŽ·å–é¢„æœŸ

å¼€å¥–åŽ **5-10åˆ†é’Ÿå†…** è‡ªåŠ¨èŽ·å–å¹¶ä¿å­˜åˆ°æ•°æ®åº“

---

## ðŸ”§ æŠ€æœ¯å®žçŽ°

**æ–‡ä»¶**: `src/schedulers/ContinuousPollingScheduler.js`

**å…³é”®æ–¹æ³•**: `calculateHKJCPollingDelay()`

**è¯†åˆ«é€»è¾‘**:
```javascript
// é¦™æ¸¯æ—¶é—´æ£€æµ‹
const hkTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Hong_Kong' }));
const dayOfWeek = hkTime.getDay(); // 2,4,6 ä¸ºå¼€å¥–æ—¥
const totalMinutes = hours * 60 + minutes;

// æ—¶æ®µåˆ¤æ–­
if (isDrawDay && totalMinutes >= 21*60+25 && totalMinutes < 21*60+45) {
  return 3000; // 3ç§’
}
```

---

## âœ¨ æ€»ç»“

**ä¼˜åŠ¿**:
- âœ… å¼€å¥–æ—¶æ®µåŠ å¯†æ£€æµ‹ï¼Œç¡®ä¿åŠæ—¶èŽ·å–
- âœ… éžå…³é”®æ—¶æ®µèŠ‚çœ **97.9%** APIè¯·æ±‚
- âœ… è‡ªåŠ¨è¯†åˆ«å¼€å¥–æ—¥ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
- âœ… åŸºäºŽé¦™æ¸¯æ—¶åŒºï¼Œç²¾ç¡®åŒ¹é…å¼€å¥–æ—¶é—´

**ä¸‹ä¸€æ­¥**: ä»Šæ™š21:25è§‚å¯Ÿæ—¥å¿—ï¼ŒéªŒè¯è‡ªåŠ¨åˆ‡æ¢ ðŸ”¥

---

**éƒ¨ç½²çŠ¶æ€**: âœ… ç”Ÿäº§è¿è¡Œä¸­
**ä¸‹æ¬¡å¼€å¥–**: 2025-12-27ï¼ˆä»Šæ™šï¼‰21:30
**ç­–ç•¥åˆ‡æ¢**: è‡ªåŠ¨ï¼Œæ— éœ€äººå·¥å¹²é¢„
