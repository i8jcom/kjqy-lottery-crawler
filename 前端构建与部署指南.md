# å‰ç«¯æ„å»ºä¸éƒ¨ç½²æŒ‡å—

## âš ï¸ é‡è¦æç¤º

**æ¯æ¬¡ä¿®æ”¹ Vue å‰ç«¯ä»£ç åï¼Œå¿…é¡»é‡æ–°æ„å»ºæ‰èƒ½ç”Ÿæ•ˆï¼**

ç”µè„‘é‡å¯åæ‰€æœ‰ä¿®æ”¹éƒ½ä¼šå¤±æ•ˆçš„åŸå› ï¼š
- âœ… Vue æºç ä¿®æ”¹äº†
- âŒ **ä½†æ²¡æœ‰æ‰§è¡Œ `npm run build` é‡æ–°æ„å»º**
- âŒ æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯æ—§çš„ `dist` ç›®å½•æ–‡ä»¶

---

## ğŸ“ ç›®å½•ç»“æ„

```
crawler-service/
â”œâ”€â”€ src/web/
â”‚   â”œâ”€â”€ WebServer.js          # åç«¯æœåŠ¡å™¨ï¼ˆä½¿ç”¨ dist ç›®å½•ï¼‰
â”‚   â”œâ”€â”€ dist/                  # â­ å‰ç«¯æ„å»ºè¾“å‡ºï¼ˆæœåŠ¡å™¨å®é™…ä½¿ç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â””â”€â”€ assets/
â”‚   â””â”€â”€ vue-app/               # Vue æºç é¡¹ç›®
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â””â”€â”€ views/
â”‚       â”‚       â””â”€â”€ RealtimeElementPlus.vue  # å€’è®¡æ—¶é€»è¾‘åœ¨è¿™é‡Œ
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ vite.config.js     # æ„å»ºé…ç½®: outDir: '../dist'
â”‚       â””â”€â”€ dist/              # âŒ è¿™ä¸ªç›®å½•ä¸å­˜åœ¨ï¼ˆæ„å»ºè¾“å‡ºåˆ°ä¸Šçº§çš„ distï¼‰
```

---

## ğŸ”§ ä¿®æ”¹å‰ç«¯ä»£ç çš„å®Œæ•´æµç¨‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd /home/i8/claude-demo/kjqy-deploy/crawler-service
./rebuild-and-restart.sh
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. åœæ­¢ç°æœ‰æœåŠ¡
2. é‡æ–°æ„å»º Vue å‰ç«¯
3. å¯åŠ¨æœåŠ¡
4. éªŒè¯å¯åŠ¨çŠ¶æ€

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ‰§è¡Œ

```bash
# 1. ä¿®æ”¹ä»£ç 
vim src/web/vue-app/src/views/RealtimeElementPlus.vue

# 2. é‡æ–°æ„å»ºå‰ç«¯
cd src/web/vue-app
npm run build

# 3. é‡å¯æœåŠ¡
cd /home/i8/claude-demo/kjqy-deploy/crawler-service
pkill -f "node.*WebServer.js"
sleep 2
nohup node src/web/WebServer.js > /tmp/crawler-service.log 2>&1 &

# 4. æ£€æŸ¥çŠ¶æ€
pgrep -f "node.*WebServer.js"
tail -f /tmp/crawler-service.log
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆç”µè„‘é‡å¯åä¿®æ”¹éƒ½æ²¡äº†ï¼Ÿ

A: å› ä¸ºåªä¿®æ”¹äº†æºç ï¼Œæ²¡æœ‰é‡æ–°æ„å»ºã€‚æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯ `dist` ç›®å½•é‡Œçš„ç¼–è¯‘åæ–‡ä»¶ï¼Œä¸æ˜¯ `vue-app/src` é‡Œçš„æºç ã€‚

### Q: å¦‚ä½•éªŒè¯æ„å»ºæˆåŠŸï¼Ÿ

```bash
# æŸ¥çœ‹ dist ç›®å½•çš„æœ€æ–°ä¿®æ”¹æ—¶é—´
ls -lh /home/i8/claude-demo/kjqy-deploy/crawler-service/src/web/dist/

# å¦‚æœæ—¶é—´æ˜¯æœ€è¿‘çš„ï¼Œè¯´æ˜æ„å»ºæˆåŠŸ
```

### Q: ä¿®æ”¹äº†å€’è®¡æ—¶é€»è¾‘ä½†æ²¡ç”Ÿæ•ˆï¼Ÿ

1. ç¡®è®¤ä¿®æ”¹çš„æ˜¯æºç æ–‡ä»¶ï¼š`src/web/vue-app/src/views/RealtimeElementPlus.vue`
2. é‡æ–°æ„å»ºï¼š`cd src/web/vue-app && npm run build`
3. é‡å¯æœåŠ¡ï¼š`pkill -f "node.*WebServer.js" && nohup node src/web/WebServer.js > /tmp/crawler-service.log 2>&1 &`
4. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼šCtrl+Shift+Rï¼ˆç¡¬åˆ·æ–°ï¼‰

### Q: å¦‚ä½•ç¡®è®¤æœåŠ¡ä½¿ç”¨çš„æ˜¯æ–°ä»£ç ï¼Ÿ

```bash
# æŸ¥çœ‹æœ€æ–°æ„å»ºçš„ JS æ–‡ä»¶
ls -lht /home/i8/claude-demo/kjqy-deploy/crawler-service/src/web/dist/assets/js/ | head -10

# åœ¨æµè§ˆå™¨ä¸­æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
# æŸ¥çœ‹ Network æ ‡ç­¾ï¼Œç¡®è®¤åŠ è½½çš„ JS æ–‡ä»¶æ—¶é—´æˆ³æ˜¯æœ€æ–°çš„
```

---

## ğŸ“ å¼€å‘å»ºè®®

### å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

å¦‚æœéœ€è¦é¢‘ç¹ä¿®æ”¹å‰ç«¯ä»£ç ï¼Œå»ºè®®ä½¿ç”¨ Vite å¼€å‘æœåŠ¡å™¨ï¼š

```bash
cd /home/i8/claude-demo/kjqy-deploy/crawler-service/src/web/vue-app
npm run dev
```

è¿™æ ·ä¼šåœ¨ http://localhost:4001 å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œä¿®æ”¹ä»£ç ä¼šè‡ªåŠ¨çƒ­æ›´æ–°ï¼Œæ— éœ€é‡æ–°æ„å»ºã€‚

**æ³¨æ„**ï¼šå¼€å‘å®Œæˆåï¼Œä»ç„¶éœ€è¦æ‰§è¡Œ `npm run build` æ¥æ›´æ–°ç”Ÿäº§ç¯å¢ƒçš„ `dist` ç›®å½•ã€‚

### ç”Ÿäº§éƒ¨ç½²

ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨æ„å»ºåçš„ä»£ç ï¼š
1. ä¿®æ”¹å®Œä»£ç åæ‰§è¡Œ `npm run build`
2. æäº¤ `dist` ç›®å½•åˆ° Gitï¼ˆæˆ–åœ¨æœåŠ¡å™¨ä¸Šé‡æ–°æ„å»ºï¼‰
3. é‡å¯æœåŠ¡

---

## ğŸ”„ Git å·¥ä½œæµ

```bash
# ä¿®æ”¹ä»£ç 
vim src/web/vue-app/src/views/RealtimeElementPlus.vue

# æ„å»º
cd src/web/vue-app && npm run build

# æäº¤æºç å’Œæ„å»ºäº§ç‰©
git add src/web/vue-app/src/
git add src/web/dist/
git commit -m "fix: ä¿®å¤å€’è®¡æ—¶æ˜¾ç¤ºé—®é¢˜"

# é‡å¯æœåŠ¡
cd /home/i8/claude-demo/kjqy-deploy/crawler-service
./rebuild-and-restart.sh
```

---

## ğŸ¯ å€’è®¡æ—¶ç›¸å…³æ–‡ä»¶

å¦‚æœè¦ä¿®å¤å€’è®¡æ—¶é—®é¢˜ï¼Œéœ€è¦å…³æ³¨è¿™äº›æ–‡ä»¶ï¼š

1. **å‰ç«¯å€’è®¡æ—¶è®¡ç®—**ï¼š`src/web/vue-app/src/views/RealtimeElementPlus.vue:242-260`
2. **åç«¯ API å€’è®¡æ—¶**ï¼š`src/web/WebServer.js`ï¼ˆæœç´¢ `officialCountdown`ï¼‰
3. **WebSocket æ¨é€**ï¼š`src/web/WebSocketManager.js`
4. **è°ƒåº¦å™¨é€»è¾‘**ï¼š`src/schedulers/CrawlerScheduler.js`

---

## âœ… æ£€æŸ¥æ¸…å•

ä¿®æ”¹å‰ç«¯ä»£ç åï¼Œè¯·ç¡®è®¤ï¼š

- [ ] å·²ä¿®æ”¹æºç ï¼š`src/web/vue-app/src/views/*.vue`
- [ ] å·²é‡æ–°æ„å»ºï¼š`npm run build`
- [ ] `dist` ç›®å½•æ—¶é—´æˆ³å·²æ›´æ–°
- [ ] å·²é‡å¯æœåŠ¡
- [ ] æµè§ˆå™¨å·²ç¡¬åˆ·æ–°ï¼ˆCtrl+Shift+Rï¼‰
- [ ] åŠŸèƒ½å·²éªŒè¯æ­£å¸¸

---

**è®°ä½ï¼šä¿®æ”¹ Vue ä»£ç  = ä¿®æ”¹æºç  + é‡æ–°æ„å»º + é‡å¯æœåŠ¡**
