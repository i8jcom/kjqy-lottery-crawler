# HKJCæ•°æ®æºURLä¿®æ”¹ä¸ºå®é™…ä½¿ç”¨åœ°å€

**ä¿®æ”¹æ—¶é—´**: 2025-12-27
**çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ğŸ¯ ä¿®æ”¹ç›®çš„

å°†HKJCæ•°æ®æºçš„æ˜¾ç¤ºä¿¡æ¯ä» **bet.hkjc.com**ï¼ˆæœªä½¿ç”¨ï¼‰ä¿®æ”¹ä¸º **win.on.cc**ï¼ˆå®é™…ä½¿ç”¨ï¼‰ï¼Œç¡®ä¿å‰ç«¯æ˜¾ç¤ºä¸å®é™…æ•°æ®æºä¸€è‡´ã€‚

---

## ğŸ“Š ä¿®æ”¹å‰åå¯¹æ¯”

### âŒ ä¿®æ”¹å‰ï¼ˆè¯¯å¯¼æ€§ï¼‰

| é¡¹ç›® | å€¼ |
|------|-----|
| **æ•°æ®æºåç§°** | é¦™æ¸¯èµ›é©¬ä¼šå®˜ç½‘ |
| **URL** | https://bet.hkjc.com |
| **ç±»å‹** | html_scraping |
| **æè¿°** | é¦™æ¸¯èµ›é©¬ä¼šå®˜æ–¹æ•°æ®æº... |
| **é—®é¢˜** | âš ï¸ å‰ç«¯æ˜¾ç¤ºä¸å®é™…ä¸ç¬¦ï¼ |

### âœ… ä¿®æ”¹åï¼ˆå‡†ç¡®ï¼‰

| é¡¹ç›® | å€¼ |
|------|-----|
| **æ•°æ®æºåç§°** | On.cc ä¸œç½‘ (é¦™æ¸¯å…­åˆå½©) |
| **URL** | https://win.on.cc |
| **ç±»å‹** | api_json |
| **æè¿°** | On.cc ä¸œç½‘æä¾›é¦™æ¸¯å…­åˆå½©å®˜æ–¹æ•°æ®... |
| **ä¼˜åŠ¿** | âœ… æ˜¾ç¤ºå‡†ç¡®ï¼Œç”¨æˆ·æ¸…æ¥šå®é™…æ¥æº |

---

## ğŸ”§ ä¿®æ”¹å†…å®¹

### 1. åˆ é™¤æœªä½¿ç”¨çš„URLå¼•ç”¨

**æ–‡ä»¶**: `src/scrapers/HKJCScraper.js`

```diff
  class HKJCScraper {
    constructor() {
      // On.cc æ•°æ®æº
      this.baseUrl = 'https://win.on.cc';
      this.apiUrl = `${this.baseUrl}/marksix/markSixRealTime.js`;

-     // HKJC å®˜ç½‘ï¼ˆä»…ä¾›å‚è€ƒï¼‰
-     this.hkjcUrl = 'https://bet.hkjc.com/ch/marksix/results';
-
      // å¼€å¥–æ—¶é—´é…ç½®ï¼ˆé¦™æ¸¯æ—¶é—´ï¼ŒUTC+8ï¼‰
      this.drawDays = [2, 4, 6]; // å‘¨äºŒã€å‘¨å››ã€å‘¨å…­
      this.drawTime = { hour: 21, minute: 30 }; // æ™šä¸Š9:30
      this.stopSellTime = { hour: 21, minute: 15 }; // åœå”®æ—¶é—´
    }
  }
```

**è¯´æ˜**: åˆ é™¤æœªä½¿ç”¨çš„ `this.hkjcUrl` å±æ€§

---

### 2. æ›´æ–°æ•°æ®æºç®¡ç†å™¨é…ç½®

**æ–‡ä»¶**: `src/managers/OfficialSourceManager.js`

```diff
  {
    id: 'hkjc',
-   name: 'é¦™æ¸¯èµ›é©¬ä¼šå®˜ç½‘',
-   url: 'https://bet.hkjc.com',
+   name: 'On.cc ä¸œç½‘ (é¦™æ¸¯å…­åˆå½©)',
+   url: 'https://win.on.cc',
    scraper: 'HKJCScraper',
    scraperInstance: hkjcScraper,
-   type: 'html_scraping',
+   type: 'api_json',
    priority: 1,
    status: 'healthy',
    updateInterval: 300,
    enabled: true,
-   description: 'é¦™æ¸¯èµ›é©¬ä¼šå®˜æ–¹æ•°æ®æºï¼Œé¦™æ¸¯å…­åˆå½©ï¼ˆæ¯å‘¨äºŒã€å››ã€å…­æ™š9:30å¼€å¥–ï¼‰',
+   description: 'On.cc ä¸œç½‘æä¾›é¦™æ¸¯å…­åˆå½©å®˜æ–¹æ•°æ®ï¼ˆæ¯å‘¨äºŒã€å››ã€å…­æ™š9:30å¼€å¥–ï¼‰',
    // ...
  }
```

**å…³é”®ä¿®æ”¹**:
- âœ… åç§°æ”¹ä¸ºå®é™…æ•°æ®æº "On.cc ä¸œç½‘"
- âœ… URLæ”¹ä¸ºå®é™…ä½¿ç”¨çš„ `https://win.on.cc`
- âœ… ç±»å‹ä» `html_scraping` æ”¹ä¸º `api_json`ï¼ˆæ›´å‡†ç¡®ï¼‰
- âœ… æè¿°æ›´æ–°ä¸ºå®é™…æƒ…å†µ

---

### 3. æ›´æ–°å½©ç§é…ç½®

**æ–‡ä»¶**: `data/lottery-configs.json`

#### 3.1 å½©ç§å®šä¹‰
```diff
  {
    "lotCode": "60001",
    "name": "é¦™æ¸¯å…­åˆå½©",
    "interval": 86400,
    "priority": "high",
    "endpoint": "hkjc",
-   "apiEndpoint": "/marksix/Results.aspx",
-   "historyEndpoint": "/marksix/Results.aspx",
+   "apiEndpoint": "/marksix/markSixRealTime.js",
+   "historyEndpoint": "/marksix/markSixRealTime.js",
    "enabled": true,
    "source": "hkjc",
-   "description": "é¦™æ¸¯èµ›é©¬ä¼šå®˜æ–¹æ•°æ®æºï¼ˆæ¯å‘¨äºŒã€å››ã€å…­æ™š9:30å¼€å¥–ï¼‰",
+   "description": "On.cc ä¸œç½‘å®˜æ–¹æ•°æ®æºï¼ˆæ¯å‘¨äºŒã€å››ã€å…­æ™š9:30å¼€å¥–ï¼‰",
    "scraperKey": "hklhc",
    // ...
  }
```

#### 3.2 ç«¯ç‚¹æ˜ å°„
```diff
  "endpointMap": {
    "hkjc": {
-     "baseUrl": "https://bet.hkjc.com",
-     "method": "html_scraping",
-     "description": "é¦™æ¸¯èµ›é©¬ä¼šå®˜æ–¹HTMLçˆ¬å–"
+     "baseUrl": "https://win.on.cc",
+     "method": "api_json",
+     "description": "On.cc ä¸œç½‘å®˜æ–¹API"
    }
  }
```

---

### 4. æ›´æ–°æŒä¹…åŒ–é…ç½®

**æ–‡ä»¶**: `data/official-sources.json`

```diff
  {
    "id": "hkjc",
-   "name": "é¦™æ¸¯èµ›é©¬ä¼šå®˜ç½‘",
-   "url": "https://bet.hkjc.com",
-   "description": "é¦™æ¸¯èµ›é©¬ä¼šå®˜æ–¹æ•°æ®æºï¼Œé¦™æ¸¯å…­åˆå½©ï¼ˆæ¯å‘¨äºŒã€å››ã€å…­æ™š9:30å¼€å¥–ï¼‰",
+   "name": "On.cc ä¸œç½‘ (é¦™æ¸¯å…­åˆå½©)",
+   "url": "https://win.on.cc",
+   "description": "On.cc ä¸œç½‘æä¾›é¦™æ¸¯å…­åˆå½©å®˜æ–¹æ•°æ®ï¼ˆæ¯å‘¨äºŒã€å››ã€å…­æ™š9:30å¼€å¥–ï¼‰",
    "priority": 1,
    "updateInterval": 300,
    "enabled": true,
    "status": "healthy",
    // ...
  }
```

---

### 5. åˆ é™¤æœªä½¿ç”¨çš„æµ‹è¯•æ–‡ä»¶

```bash
rm monitor-hkjc-api.js
```

**è¯´æ˜**: è¿™æ˜¯ä¸€ä¸ªæ—©æœŸæµ‹è¯•æ–‡ä»¶ï¼Œç”¨äºæ¢ç´¢bet.hkjc.comçš„APIï¼Œç°å·²ä¸éœ€è¦

---

## âœ… éªŒè¯ç»“æœ

### APIå“åº”éªŒè¯

```bash
curl -s http://localhost:4000/api/sources | python3 -m json.tool | grep -A 20 '"id": "hkjc"'
```

**è¾“å‡º**:
```json
{
  "id": "hkjc",
  "name": "On.cc ä¸œç½‘ (é¦™æ¸¯å…­åˆå½©)",
  "baseUrl": "https://win.on.cc",
  "type": "api_json",
  "priority": 1,
  "enabled": true,
  "status": "healthy",
  "responseTime": 1158,
  "successRate": "100.00",
  "errors": 0,
  "totalRequests": 55,
  "successRequests": 55,
  "lotteries": [
    {
      "lotCode": "60001",
      "name": "é¦™æ¸¯å…­åˆå½©",
      "enabled": true
    }
  ],
  "description": "On.cc ä¸œç½‘æä¾›é¦™æ¸¯å…­åˆå½©å®˜æ–¹æ•°æ®ï¼ˆæ¯å‘¨äºŒã€å››ã€å…­æ™š9:30å¼€å¥–ï¼‰"
}
```

âœ… **æ‰€æœ‰å­—æ®µå·²æ›´æ–°ä¸ºå®é™…å€¼**

---

### åŠŸèƒ½éªŒè¯

```bash
curl -s "http://localhost:4000/api/realtime-data?lotCode=60001" | python3 -m json.tool
```

**è¾“å‡º**:
```json
{
  "success": true,
  "data": {
    "lotCode": "60001",
    "issue": "25133",
    "drawCode": "1,2,4,30,41,43",
    "drawTime": "2025-12-25 21:30:00",
    "extra": "13",
    "countdown": 82790,
    "source": "cache",
    "fromCache": true
  }
}
```

âœ… **æ•°æ®è·å–åŠŸèƒ½æ­£å¸¸**

---

### å‰ç«¯æ˜¾ç¤ºéªŒè¯

è®¿é—® `http://localhost:4000/`ï¼Œåœ¨"æ•°æ®æºç®¡ç†"é¡µé¢å¯ä»¥çœ‹åˆ°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ On.cc ä¸œç½‘ (é¦™æ¸¯å…­åˆå½©)      [å¥åº·]         â”‚
â”‚ https://win.on.cc                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æˆåŠŸç‡: 100.00%    å“åº”æ—¶é—´: 1158ms         â”‚
â”‚ æ€»è¯·æ±‚: 55         é”™è¯¯æ¬¡æ•°: 0              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼˜å…ˆçº§: 1                                   â”‚
â”‚ ç±»å‹: api_json                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ² æ”¯æŒå½©ç§ (1)                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚ â”‚ é¦™æ¸¯å…­åˆå½© (60001)â”‚                        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                             â”‚
â”‚ ğŸ’¡ On.cc ä¸œç½‘æä¾›é¦™æ¸¯å…­åˆå½©å®˜æ–¹æ•°æ®        â”‚
â”‚    ï¼ˆæ¯å‘¨äºŒã€å››ã€å…­æ™š9:30å¼€å¥–ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

âœ… **å‰ç«¯æ˜¾ç¤ºå‡†ç¡®**

---

## ğŸ“‹ ä¿®æ”¹æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | ä¿®æ”¹å†…å®¹ |
|------|------|----------|
| `src/scrapers/HKJCScraper.js` | ä»£ç  | åˆ é™¤æœªä½¿ç”¨çš„ `this.hkjcUrl` |
| `src/managers/OfficialSourceManager.js` | ä»£ç  | æ›´æ–°nameã€urlã€typeã€description |
| `data/lottery-configs.json` | é…ç½® | æ›´æ–°å½©ç§å’Œç«¯ç‚¹æ˜ å°„ |
| `data/official-sources.json` | é…ç½® | æ›´æ–°æŒä¹…åŒ–é…ç½® |
| `monitor-hkjc-api.js` | åˆ é™¤ | å·²åˆ é™¤æœªä½¿ç”¨çš„æµ‹è¯•æ–‡ä»¶ |

---

## ğŸ¯ ä¿®æ”¹æ•ˆæœ

### ç”¨æˆ·ä½“éªŒæ”¹è¿›

| æ”¹è¿›ç‚¹ | è¯´æ˜ |
|--------|------|
| âœ… **æ˜¾ç¤ºå‡†ç¡®** | ç”¨æˆ·èƒ½æ¸…æ¥šçœ‹åˆ°å®é™…æ•°æ®æ¥æº |
| âœ… **ç±»å‹æ­£ç¡®** | api_json ç±»å‹æ¯” html_scraping æ›´å‡†ç¡® |
| âœ… **é¿å…è¯¯è§£** | ä¸ä¼šè¯¯ä»¥ä¸ºåœ¨çˆ¬å– bet.hkjc.com |
| âœ… **ä»£ç ä¸€è‡´** | æ˜¾ç¤ºä¿¡æ¯ä¸ä»£ç å®ç°ä¸€è‡´ |

### æŠ€æœ¯ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| âœ… **ç»´æŠ¤æ€§** | ä»£ç å’Œé…ç½®å®Œå…¨ä¸€è‡´ï¼Œæ˜“äºç»´æŠ¤ |
| âœ… **å¯è¿½æº¯æ€§** | é—®é¢˜æ’æŸ¥æ—¶èƒ½å¿«é€Ÿå®šä½å®é™…æ•°æ®æº |
| âœ… **è¯šå®é€æ˜** | å¦‚å®å±•ç¤ºç³»ç»Ÿæ¶æ„ |

---

## ğŸ“Š ç³»ç»ŸçŠ¶æ€

### HKJCæ•°æ®æºçŠ¶æ€
- **çŠ¶æ€**: å¥åº· âœ…
- **æˆåŠŸç‡**: 100.00% (55/55)
- **å“åº”æ—¶é—´**: ~1158ms
- **é”™è¯¯æ•°**: 0
- **æ•°æ®å‡†ç¡®æ€§**: å·²éªŒè¯ âœ…

### å®é™…ä½¿ç”¨çš„æ•°æ®æº
- **å®æ—¶æ•°æ®**: On.cc API (`https://win.on.cc/marksix/markSixRealTime.js`)
- **å†å²æ•°æ®**: cpzhan.comï¼ˆå·²å¯¼å…¥2,042æœŸï¼‰
- **æ™ºèƒ½è½®è¯¢**: å·²å¯ç”¨ï¼ˆå¼€å¥–æ—¶æ®µæ¯3ç§’ï¼‰

---

## ğŸ’¡ æ€»ç»“

**ä¿®æ”¹åŸå› **:
- å‰ç«¯æ˜¾ç¤º bet.hkjc.comï¼Œä½†å®é™…ä½¿ç”¨ win.on.cc
- é€ æˆç”¨æˆ·è¯¯è§£å’Œç»´æŠ¤å›°éš¾

**ä¿®æ”¹æ–¹æ¡ˆ**:
- å°†æ‰€æœ‰é…ç½®æ›´æ–°ä¸ºå®é™…ä½¿ç”¨çš„ On.cc æ•°æ®æº
- åˆ é™¤æœªä½¿ç”¨çš„ bet.hkjc.com å¼•ç”¨
- ç±»å‹ä» html_scraping æ”¹ä¸º api_json

**ä¿®æ”¹ç»“æœ**:
- âœ… å‰ç«¯æ˜¾ç¤ºå‡†ç¡®
- âœ… ä»£ç é…ç½®ä¸€è‡´
- âœ… åŠŸèƒ½å®Œå…¨æ­£å¸¸
- âœ… ç”¨æˆ·ä½“éªŒæå‡

---

**éƒ¨ç½²çŠ¶æ€**: âœ… å·²éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ
**éªŒè¯çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡
**åŠŸèƒ½çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ
