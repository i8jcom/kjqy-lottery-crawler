# 如何查看台湾彩票数据源

## ✅ 已完成的配置

台湾彩票数据源已经完全配置好，包括：

1. ✅ **爬虫类**: `TaiwanLotteryScraper.js` - 支持6种台湾彩票
2. ✅ **数据源配置**: 已添加到 `OfficialSourceManager.js`
3. ✅ **彩种配置**: 已添加到 `lottery-configs.json`
4. ✅ **JSON配置**: 已添加到 `official-sources.json`

## ⚠️ 为什么前端看不到？

服务器正在运行旧代码（PID: 1524376），需要重启才能加载新的台湾彩票数据源。

由于服务器以 **root** 用户运行，需要 root 权限重启。

## 🔄 重启方法（3选1）

### 方法1: 使用 sudo（推荐）
```bash
# 停止服务器
sudo kill 1524376

# 等待2秒
sleep 2

# 重启服务器
cd /home/i8/claude-demo/kjqy-deploy/crawler-service
sudo npm start
```

### 方法2: 使用脚本
```bash
cd /home/i8/claude-demo/kjqy-deploy/crawler-service
sudo ./restart-server.sh
```

### 方法3: 使用 systemctl（如果配置了服务）
```bash
sudo systemctl restart crawler-service
```

## ✅ 重启后验证

1. **检查API**:
```bash
curl http://localhost:4000/api/sources | jq '.data | length'
# 应该返回: 10（之前是9）
```

2. **查看台湾彩票数据源**:
```bash
curl http://localhost:4000/api/sources | jq '.data[] | select(.id == "taiwanlottery")'
# 应该返回台湾彩票的详细信息
```

3. **打开浏览器**:
   - 访问: http://localhost:4000/sources
   - 在"数据源管理"页面应该能看到：
     - **名称**: 台湾彩票官网
     - **URL**: https://www.taiwanlottery.com
     - **描述**: 🇹🇼 台湾彩票官方数据源（威力彩、大乐透、今彩539、38樂合彩、3D、4D）

## 📊 台湾彩票支持的彩种

重启后，系统将支持以下台湾彩票：

| 彩种代码 | 彩种名称 | Scraper Key |
|---------|---------|-------------|
| 100001 | 威力彩 | lotto649 |
| 100002 | 大乐透 | biglotto |
| 100003 | 今彩539 | daily539 |
| 100004 | 38樂合彩 | list38 |
| 100005 | 3D | lotto3d |
| 100006 | 4D | lotto4d |

## 🐛 故障排查

### 问题1: 重启后仍然只有9个数据源
**解决**: 检查 `official-sources.json` 是否包含台湾彩票：
```bash
grep taiwanlottery data/official-sources.json
```

### 问题2: 无法访问 http://localhost:4000
**解决**: 检查服务器是否启动：
```bash
ps aux | grep "node.*index.js"
```

### 问题3: 权限不足
**解决**: 使用 `sudo` 或联系管理员

---

**配置时间**: 2026-01-04
**当前服务器PID**: 1524376 (root用户)
**需要操作**: 重启服务器
